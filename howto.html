
<link type="text/css" rel="stylesheet" href="/resources/css/autocomplete.css?v={$resource_version}"/>

<style type="text/css">
    .autocomplete-items {
        width: 700px;
        max-height: 600px;
    }
</style>

<script type="text/javascript" src="/resources/js/autocomplete.js?v={$resource_version}"></script>

<div class="autocomplete" style="width:350px;">
    <input type="search"
           id="work-code-select-{$key}"
           style="width: 100%;"
           placeholder="Start Typing or Click to Toggle Dropdown"
           value="{$WorkCodes[$WorkCodeID]->WorkCodeName|escape}">

    <input type="hidden"
           name="WorkCodes[{$key}][WorkCodeID]"
           value="{$WorkCodeID}">
</div>

<script type="text/javascript">

    {literal}
	const workCodeArr = Object.values(WorkCodes)
			// .filter(wc => document.getElementById('CallTypeID').value === wc.CallTypeID)
			.map(wc => {
				let o = {};
				o.value = wc.WorkCodeID;
				o.label = wc.WorkCodeName;
				return o;
			});
    {/literal}

	let cb;

	{foreach from=$WorkOrder_Installer_WorkCodes item="WO_I_WC" key="key" name="WO_I_WC"}

	cb = function () { AddWorkCodeClaimNote('{$key}', '{$WO_I_WC->PaymentClaimedForOwner}'); }

	autocompleteWorkCodes(document.getElementById("work-code-select-{$key}"), document.getElementsByName("WorkCodes[{$key}][WorkCodeID]")[0], workCodeArr, cb);

    {/foreach}
</script>
